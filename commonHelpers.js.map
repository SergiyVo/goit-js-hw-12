{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const refs = {\n    form: document.querySelector('.form'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadBtn: document.querySelector('.loader-btn'),\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from './refs';\n\nfunction galleryTemplate(element) {   //Робимо розмітку, забираємо з інформації яка прийшла те що нам потрібно за допомогою деструкторизації\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = element;\n    return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <ul class=\"gallery-body\">\n        <li class=\"gallery-info\">\n          <h3>Likes:</h3>\n          <p>${likes}</p>\n        </li>\n        <li class=\"gallery-info\">\n          <h3>Views:</h3>\n          <p>${views}</p>\n        </li>\n        <li class=\"gallery-info\">\n          <h3>Comments:</h3>\n          <p>${comments}</p>\n        </li>\n        <li class=\"gallery-info\">\n          <h3>Downloads:</h3>\n          <p>${downloads}</p>\n        </li>\n      </ul>\n    </li>`\n}\n \nexport function renderGallery(images) {   // Візуалізуємо інформацію яку приніс посильний\n    const markup = images.map(element => {\n        return galleryTemplate(element)\n    }).join('\\n');       \n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n    new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n    });\n    refs.loader.style.display = 'none';\n}","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { renderGallery } from './js/render-functions';\nimport { refs } from './js/refs';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.loader-btn');\n\n\nlet page = 1;\nlet perPage = 15;\nlet searchQuery;\nrefs.loadBtn.style.display = 'none';\nrefs.loader.style.display = 'none';\n\nrefs.form.addEventListener('submit', async e => {\n  e.preventDefault();\n  page = 1;\n  gallery.innerHTML = '';\n  searchQuery = refs.form.elements.search.value.trim();\n  if (searchQuery === '') {\n    iziToast.show({\n      message: 'Please write search image',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  refs.loader.style.display = 'inline-block';\n  try {\n    const { hits, totalHits } = await fetchImage(searchQuery, page);\n    if (totalHits === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FAFAFB',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n      });\n      refs.loader.style.display = 'none'; \n      return;\n    }\n    renderGallery(hits);\n    if (totalHits < perPage) {\n      notification(); \n      refs.loadBtn.style.display = 'none';\n    } else {\n      refs.loadBtn.style.display = 'block'; \n    }\n  } catch (error) {\n\n    iziToast.show({\n      message: `Sorry, ${error}`,\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n  } finally {\n    refs.form.reset();   \n  }\n});\n\nloadBtn.addEventListener('click', async () => {\n  page += 1;\n  refs.loadBtn.style.display = 'block'; \n  refs.loader.style.display = 'inline-block'; \n  try {\n    const { hits, totalHits } = await fetchImage(searchQuery, page);\n    renderGallery(hits);\n    scroll();\n    if (perPage * page > totalHits) {\n      notification();\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `Sorry, ${error}`,\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'bottomCenter',\n    });\n    refs.loadBtn.style.display = 'none';\n  } finally {\n    refs.form.reset(); \n  }\n});\n\nasync function fetchImage(searchQuery, page) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const searchParams = {\n    key: '42093583-bfe36716eb3593f6644c471e3',\n    q: searchQuery,\n    page,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n  };\n\n  const urlparams = new URLSearchParams(searchParams);\n  const { data } = await axios.get(`${BASE_URL}${END_POINT}?${urlparams}`);\n  return data;\n}\n\nfunction notification() {\n  refs.loadBtn.style.display = 'none';\n  refs.loader.style.display = 'none';\n  iziToast.show({\n    message: 'We are sorry, but you have reached the end of search results.',\n    messageColor: '#FAFAFB',\n    backgroundColor: '#1DB8F5',\n    position: 'topRight',\n  });\n}\n\nfunction scroll() {\n  const listItem = document.querySelector('.gallery-item');\n  const heightScroll = listItem.getBoundingClientRect().height * 2;\n  window.scrollBy({\n    top: heightScroll,\n    left: 0,\n    behavior: 'smooth',\n  });\n}"],"names":["refs","galleryTemplate","element","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderGallery","images","markup","SimpleLightbox","gallery","loadBtn","page","perPage","searchQuery","e","iziToast","hits","totalHits","fetchImage","notification","error","scroll","BASE_URL","END_POINT","searchParams","urlparams","data","axios","heightScroll"],"mappings":"+vBAAO,MAAMA,EAAO,CAChB,KAAM,SAAS,cAAc,OAAO,EACpC,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,aAAa,CACjD,ECDA,SAASC,EAAgBC,EAAS,CAC9B,KAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EACjF,MAAO;AAAA;AAAA,sCAE2BE,CAAa;AAAA,0CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,eAKrDC,CAAK;AAAA;AAAA;AAAA;AAAA,eAILC,CAAK;AAAA;AAAA;AAAA;AAAA,eAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,eAIRC,CAAS;AAAA;AAAA;AAAA,UAIxB,CAEO,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EAAO,IAAIT,GACfD,EAAgBC,CAAO,CACjC,EAAE,KAAK;AAAA,CAAI,EACZF,EAAK,QAAQ,mBAAmB,YAAaY,CAAM,EAEnD,IAAIC,EAAe,aAAc,CACjC,aAAc,IACd,aAAc,KAClB,CAAK,EACDb,EAAK,OAAO,MAAM,QAAU,MAChC,CCrCa,SAAS,cAAc,OAAO,EAC3C,MAAMc,EAAU,SAAS,cAAc,UAAU,EAClC,SAAS,cAAc,SAAS,EAC/C,MAAMC,EAAU,SAAS,cAAc,aAAa,EAGpD,IAAIC,EAAO,EACPC,EAAU,GACVC,EACJlB,EAAK,QAAQ,MAAM,QAAU,OAC7BA,EAAK,OAAO,MAAM,QAAU,OAE5BA,EAAK,KAAK,iBAAiB,SAAU,MAAMmB,GAAK,CAK9C,GAJAA,EAAE,eAAc,EAChBH,EAAO,EACPF,EAAQ,UAAY,GACpBI,EAAclB,EAAK,KAAK,SAAS,OAAO,MAAM,OAC1CkB,IAAgB,GAAI,CACtBE,EAAS,KAAK,CACZ,QAAS,4BACT,aAAc,UACd,gBAAiB,UACjB,SAAU,UAChB,CAAK,EACD,MACD,CAEDpB,EAAK,OAAO,MAAM,QAAU,eAC5B,GAAI,CACF,KAAM,CAAE,KAAAqB,EAAM,UAAAC,CAAW,EAAG,MAAMC,EAAWL,EAAaF,CAAI,EAC9D,GAAIM,IAAc,EAAG,CACnBF,EAAS,KAAK,CACZ,QACE,2EACF,aAAc,UACd,gBAAiB,UACjB,SAAU,UAClB,CAAO,EACDpB,EAAK,OAAO,MAAM,QAAU,OAC5B,MACD,CACDU,EAAcW,CAAI,EACdC,EAAYL,GACdO,IACAxB,EAAK,QAAQ,MAAM,QAAU,QAE7BA,EAAK,QAAQ,MAAM,QAAU,OAEhC,OAAQyB,EAAO,CAEdL,EAAS,KAAK,CACZ,QAAS,UAAUK,CAAK,GACxB,aAAc,UACd,gBAAiB,UACjB,SAAU,UAChB,CAAK,CACL,QAAY,CACRzB,EAAK,KAAK,OACX,CACH,CAAC,EAEDe,EAAQ,iBAAiB,QAAS,SAAY,CAC5CC,GAAQ,EACRhB,EAAK,QAAQ,MAAM,QAAU,QAC7BA,EAAK,OAAO,MAAM,QAAU,eAC5B,GAAI,CACF,KAAM,CAAE,KAAAqB,EAAM,UAAAC,CAAW,EAAG,MAAMC,EAAWL,EAAaF,CAAI,EAC9DN,EAAcW,CAAI,EAClBK,IACIT,EAAUD,EAAOM,GACnBE,GAEH,OAAQC,EAAO,CACdL,EAAS,KAAK,CACZ,QAAS,UAAUK,CAAK,GACxB,aAAc,UACd,gBAAiB,UACjB,SAAU,cAChB,CAAK,EACDzB,EAAK,QAAQ,MAAM,QAAU,MACjC,QAAY,CACRA,EAAK,KAAK,OACX,CACH,CAAC,EAED,eAAeuB,EAAWL,EAAaF,EAAM,CAC3C,MAAMW,EAAW,sBACXC,EAAY,QACZC,EAAe,CACnB,IAAK,qCACL,EAAGX,EACH,KAAAF,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUC,CACd,EAEQa,EAAY,IAAI,gBAAgBD,CAAY,EAC5C,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAM,IAAI,GAAGL,CAAQ,GAAGC,CAAS,IAAIE,CAAS,EAAE,EACvE,OAAOC,CACT,CAEA,SAASP,GAAe,CACtBxB,EAAK,QAAQ,MAAM,QAAU,OAC7BA,EAAK,OAAO,MAAM,QAAU,OAC5BoB,EAAS,KAAK,CACZ,QAAS,gEACT,aAAc,UACd,gBAAiB,UACjB,SAAU,UACd,CAAG,CACH,CAEA,SAASM,GAAS,CAEhB,MAAMO,EADW,SAAS,cAAc,eAAe,EACzB,sBAAqB,EAAG,OAAS,EAC/D,OAAO,SAAS,CACd,IAAKA,EACL,KAAM,EACN,SAAU,QACd,CAAG,CACH"}